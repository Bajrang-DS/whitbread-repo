var _=Object.defineProperty;var b=(t,e,r)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var l=(t,e,r)=>(b(t,typeof e!="symbol"?e+"":e,r),r);import{r as y,a as k}from"./index-64eabbbd.js";import{g as u,a as P,H as w,C as T,s as j,c as L}from"./PhotoSlider-7cdc871d.js";import{j as R,c as E}from"./header-6579e51e.js";const p=t=>{var r;return u().name==="browser"&&t===((r=window==null?void 0:window.location)==null?void 0:r.hostname)};function v(t){var e=new w;return new P(t,e)}class D{constructor(e,r){l(this,"_optedIn");l(this,"_conversionTrackingEnabled",!1);l(this,"_cookieManager");l(this,"_analyticsReporter");l(this,"_pageViewFired",!1);l(this,"_enableDebugging",!1);this.templateData=e,this._optedIn=!r,this.makeReporter(),this.pageView()}calculatePageType(){var i,a,c,s;const e=!!((a=(i=this.templateData.document)==null?void 0:i.__)!=null&&a.staticPage),r=!!((s=(c=this.templateData.document)==null?void 0:c.__)!=null&&s.entityPageSet);let n;if(e)n={name:"static",staticPageId:this.templateData.document.__.name};else if(r)n={name:"entity",pageSetId:this.templateData.document.__.name,id:this.templateData.document.uid};else throw new Error("invalid document type");return n}makeReporter(){var r,n,i,a;if(u().name!=="browser"||!this._optedIn)return;const e=p((n=(r=this.templateData)==null?void 0:r.document)==null?void 0:n.siteInternalHostName)||p((a=(i=this.templateData)==null?void 0:i.document)==null?void 0:a.siteDomain);this._analyticsReporter=v({businessId:this.templateData.document.businessId,pageType:this.calculatePageType(),pageUrl:window.location.href,production:e,referrer:document.referrer,siteId:this.templateData.document.siteId}),this.setDebugEnabled(this._enableDebugging)}canTrack(){return u().name==="browser"&&this._optedIn&&!!this._analyticsReporter}setupConversionTracking(){var e;this._cookieManager=new T,(e=this._analyticsReporter)==null||e.setConversionTrackingEnabled(!0,this._cookieManager.setAndGetYextCookie())}enableTrackingCookie(){this._conversionTrackingEnabled=!0,this.canTrack()&&this.setupConversionTracking()}identify(e){var r;this.canTrack()&&((r=this._analyticsReporter)==null||r.setVisitor(e))}async optIn(){this._optedIn=!0,this.makeReporter(),this._conversionTrackingEnabled&&!this._cookieManager&&this.setupConversionTracking(),this._pageViewFired||await this.pageView()}async pageView(){var e;if(!this.canTrack())return Promise.resolve(void 0);await((e=this._analyticsReporter)==null?void 0:e.pageView()),this._pageViewFired=!0}async track(e,r){var n;if(!this.canTrack())return Promise.resolve();await((n=this._analyticsReporter)==null?void 0:n.track({eventType:j(e)},r))}setDebugEnabled(e){var r;this._enableDebugging=e,(r=this._analyticsReporter)==null||r.setDebugEnabled(e)}trackClick(e,r){return n=>{if(!this.canTrack())return Promise.resolve();if(n.target===null||n.defaultPrevented)return this.track(e,r);const i=n.target;if(i.href===null||i.href===void 0)return this.track(e,r);const a=new URL(i.href);if(a.protocol==="mailto:"||a.protocol==="tel:"||a.protocol==="javascript:"||a.hostname===window.location.hostname)return this.track(e,r);if(i.target&&!i.target.match(/^_(self|parent|top)$/i)||n.ctrlKey||n.shiftKey||n.metaKey)return this.track(e,r);n.preventDefault();const s=()=>{window.location.assign(a)},m=new Promise(f=>{setTimeout(()=>{f()},1e3)});return Promise.race([this.track(e,r),m]).then(s)}}}function $(t){const{children:e,requireOptIn:r,enableTrackingCookie:n,enableDebugging:i,templateData:a}=t,c=y.exports.useRef(null);c.current===null&&(c.current=new D(a,r));const s=c.current;return n&&s.enableTrackingCookie(),(i||S())&&s.setDebugEnabled(!0),R(L.Provider,{value:s,children:e})}function S(){return u().name!=="browser"||typeof window===void 0?!1:!!new URL(window.location.href).searchParams.get("xYextDebug")}var I={},o={};const C=k(E);var J=C.jsx;Object.defineProperty(o,"__esModule",{value:!0});o.helmetJsonLdProp=o.jsonLdScriptProps=o.JsonLd=void 0;function O(t){return J("script",{...Object.assign({},d(t.item,t))})}o.JsonLd=O;function d(t,e={}){return{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(t,h,e.space)}}}o.jsonLdScriptProps=d;function A(t,e={}){return{type:"application/ld+json",innerHTML:JSON.stringify(t,h,e.space)}}o.helmetJsonLdProp=A;const g=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}),M=new RegExp(`[${Object.keys(g).join("")}]`,"g"),V=t=>g[t],h=(()=>(t,e)=>{switch(typeof e){case"object":return e===null?void 0:e;case"number":case"boolean":case"bigint":return e;case"string":return e.replace(M,V);default:return}})();(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonLdScriptProps=t.JsonLd=t.helmetJsonLdProp=void 0;var e=o;Object.defineProperty(t,"helmetJsonLdProp",{enumerable:!0,get:function(){return e.helmetJsonLdProp}}),Object.defineProperty(t,"JsonLd",{enumerable:!0,get:function(){return e.JsonLd}}),Object.defineProperty(t,"jsonLdScriptProps",{enumerable:!0,get:function(){return e.jsonLdScriptProps}})})(I);export{$ as A,I as s};
